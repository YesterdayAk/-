"use strict";(self.webpackChunklabor_live=self.webpackChunklabor_live||[]).push([[191],{5191:(e,n,i)=>{i.r(n),i.d(n,{default:()=>Y});var l=i(6252),a=i(3577),t=function(e){return(0,l.dD)("data-v-a4b47086"),e=e(),(0,l.Cn)(),e},o={action:"/"},u=t((function(){return(0,l._)("div",{style:{height:"8px",background:"#f5f5f5"}},null,-1)})),s={style:{display:"flex","align-items":"center","justify-content":"space-between"}},r={style:{display:"flex"}},d={style:{position:"relative"}},c=["src"],g={style:{"margin-left":"12px"}},p={class:"fsize14",style:{"padding-top":"5px"}},f={class:"fsize12",style:{"margin-top":"12px"}},v={style:{"padding-bottom":"23px","text-align":"center"}},h=t((function(){return(0,l._)("div",{class:"pop-title"},"提示",-1)})),A={class:"pop-content"},m={key:0,style:{"margin-bottom":"24px"}},w={key:0,class:"menu-box",style:{padding:"0","max-height":"20vh","overflow-y":"scroll"}},x={style:{"margin-top":"20px"}},k=(0,l.Uk)("取消"),b=(0,l.Uk)("确认解除"),y=(0,l.Uk)("确认转让");var C=i(655),P=i(2262),I=i(1751),U=(i(4333),i(1610)),R=i(5759),S=i(5684),F=i(3476),B=i(7872);const L={name:"AdminManage",setup:function(){var e=(0,l.FN)().appContext.config.globalProperties.$axios,n=(0,R.H)(),i=(0,S.Jk)(n),a=i.liveId,t=i.isAdmin,o=(0,P.qj)({superManageSign:F,generalManageSign:B,userList:[],show:!1,menuVisible:!1,value:(0,P.iH)(null),currentPage:(0,P.iH)(0),sizePage:(0,P.iH)(10),totalPage:(0,P.iH)(0),liveId:(0,P.iH)(""),isAdmin:(0,P.iH)(""),userId:(0,P.iH)("")});o.liveId=a.value,o.isAdmin=t.value;var u={id:"",name:"选择要授予的管理员",phone:"",label:null},s={id:"",name:"张先生",phone:"133",label:0},r=function(){o.show=!1},d=(0,P.iH)(!1),c=(0,P.iH)(!1),g=(0,P.iH)(!1),p=(0,P.iH)(!1),f=(0,P.iH)(""),v=function(n,i){console.log(n+"---"+i);var l={liveId:o.liveId,sendType:i,userId:n};(0,U.v_)(e.defaults.baseURL+"/jeecg-boot/api/liveAdmin/edit",l).then((function(e){200==e.data.code?((0,I.Z)(e.data.message),f.value="",p.value=!1,r(),g.value=!0,o.isAdmin=t.value,m()):500==e.data.code&&(p.value=!1,r(),(0,I.Z)(e.data.message))}))};function h(n){(0,U.U2)(e.defaults.baseURL+"/jeecg-boot/api/liveAdmin/list",n).then((function(e){if(200==e.data.code&&e.data.result){var n=e.data.result;console.log("userList",n);var i=n.records;if(i.length>0)for(var l=0;l<i.length;l++)o.userList.push(i[l]);console.log("当前页："+o.currentPage),d.value=!1,o.currentPage>=n.pages&&(c.value=!0)}else c.value=!0,d.value=!1}))}var A=function(){g.value&&(o.userList=[],o.currentPage=0,g.value=!1),o.currentPage++,h({pageNo:o.currentPage,pageSize:10,liveId:o.liveId})},m=function(){c.value=!1,d.value=!0,A()},w=function(){(0,U.U2)(e.defaults.baseURL+"/jeecg-boot/api/user/getUserByToken").then((function(e){if(200==e.data.code&&e.data.result){var n=e.data.result;console.log("userInfo",n),o.userId=n.id}}))};return w(),(0,C.pi)((0,C.pi)({},(0,P.BK)(o)),{onClickLeft:function(){return history.back()},onSearch:function(e){o.userList=[],h({pageNo:1,pageSize:10,liveId:o.liveId,fullName:e})},onCancel:function(){return(0,I.Z)("取消")},onLoad:A,loading:d,finished:c,onRefresh:m,refreshing:g,showPopup:function(e){o.menuVisible=!1,u.id="",u.name="选择要授予的管理员",o.liveId=e.liveId,f.value=e.userId,console.log("activeId:--"+f.value),console.log(u),0!=e.isAdmin?(s.label=e.isAdmin,1==s.label?s.name="即将解除“"+e.fullName+"”的管理员身份，请谨慎操作！":2==s.label&&(s.name="转让行为不可撤销，请谨慎操作！"),o.show=!0):v(e.userId,"8")},currentPeople:s,pickMenu:function(e){u.id=e.userId,u.name=e.fullName,u.label=e.label,console.log(u),o.menuVisible=!1},showMenu:function(){o.menuVisible=!0},toPeople:u,hidePopup:r,updateRole:function(){var e,n;p.value=!0,1==s.label?v(f.value,"2"):2==s.label&&(u.label=null,e=f.value,n=u.id,console.log(e+"--\x3e"+n),v(n||e,"4"))},loadData:h,activeId:f,buttonLoading:p,getUserId:w})}};const Y=(0,i(3744).Z)(L,[["render",function(e,n,i,t,C,P){var I=(0,l.up)("van-nav-bar"),U=(0,l.up)("van-search"),R=(0,l.up)("van-image"),S=(0,l.up)("van-button"),F=(0,l.up)("van-cell"),B=(0,l.up)("van-list"),L=(0,l.up)("van-pull-refresh"),Y=(0,l.up)("van-popup");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(I,{class:"title",title:"管理员","left-text":"","left-arrow":"",onClickLeft:t.onClickLeft},null,8,["onClickLeft"]),(0,l._)("form",o,[(0,l.Wm)(U,{modelValue:e.value,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.value=n}),shape:"round","show-action":""!=e.value,placeholder:"请输入搜索关键词",onSearch:t.onSearch,onCancel:t.onCancel},null,8,["modelValue","show-action","onSearch","onCancel"])]),(0,l.Wm)(L,{modelValue:t.refreshing,"onUpdate:modelValue":n[2]||(n[2]=function(e){return t.refreshing=e}),onRefresh:t.onRefresh},{default:(0,l.w5)((function(){return[(0,l.Wm)(B,{loading:t.loading,"onUpdate:loading":n[1]||(n[1]=function(e){return t.loading=e}),finished:t.finished,"finished-text":"没有更多了",onLoad:t.onLoad,class:"pull-box"},{default:(0,l.w5)((function(){return[u,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.userList,(function(n){return(0,l.wg)(),(0,l.j4)(F,{key:n.id},{default:(0,l.w5)((function(){return[(0,l._)("div",s,[(0,l._)("div",r,[(0,l._)("div",d,[(0,l.Wm)(R,{round:"",width:"48px",height:"48px",src:n.userIcon},null,8,["src"]),(0,l._)("img",{style:{width:"13px",height:"14px",position:"absolute",bottom:"7px",right:"0"},src:1==n.isAdmin?e.generalManageSign:2==n.isAdmin?e.superManageSign:"",alt:""},null,8,c),(0,l.kq)(' <div class="label-man" >\r\n                  <van-image\r\n                   v-if="0"\r\n                    round\r\n                    width="13px"\r\n                    height="14px"\r\n                    :src="require(\'@/assets/manage/women.png\')"\r\n                  />\r\n                  <van-image\r\n                    v-if="1"\r\n                    round\r\n                    width="13px"\r\n                    height="14px"\r\n                    :src="require(\'@/assets/manage/man.png\')"\r\n                  />\r\n                </div> ')]),(0,l._)("div",g,[(0,l._)("div",p,(0,a.zw)(n.fullName)+" - "+(0,a.zw)(n.phone),1),(0,l._)("div",f,(0,a.zw)(n.laborName),1)])]),"2"==e.isAdmin?((0,l.wg)(),(0,l.j4)(S,{key:0,class:(0,a.C_)(["fsize13",{color:0==n.isAdmin,plain:1==n.isAdmin||2==n.isAdmin}]),loading:t.activeId==n.userId&&0==n.isAdmin,onClick:function(e){return t.showPopup(n)}},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,a.zw)(0==n.isAdmin?"设为管理员":1==n.isAdmin?"解除管理员":"转让管理员"),1)]})),_:2},1032,["class","loading","onClick"])):(0,l.kq)("v-if",!0)])]})),_:2},1024)})),128))]})),_:1},8,["loading","finished","onLoad"])]})),_:1},8,["modelValue","onRefresh"]),(0,l.Wm)(Y,{show:e.show,"onUpdate:show":n[6]||(n[6]=function(n){return e.show=n}),closeable:"",round:"",style:{width:"90vw"}},{default:(0,l.w5)((function(){return[(0,l._)("div",v,[h,(0,l._)("div",A,(0,a.zw)(t.currentPeople.name),1),2==t.currentPeople.label?((0,l.wg)(),(0,l.iD)("div",m,[(0,l._)("div",{class:"menu-box",onClick:n[3]||(n[3]=function(e){return t.showMenu()}),style:{height:"34px"}},[(0,l.kq)(' <span v-if="!menuVisible"></span> '),(0,l._)("span",null,(0,a.zw)(t.toPeople.name),1)]),e.menuVisible?((0,l.wg)(),(0,l.iD)("div",w,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.userList,(function(e){return(0,l.wg)(),(0,l.j4)(F,{key:e.id,onClick:function(n){return t.pickMenu(e)}},{default:(0,l.w5)((function(){return[1==e.isAdmin&&e.userId!=t.activeId?((0,l.wg)(),(0,l.iD)("span",{key:0,class:(0,a.C_)({activemenu:t.toPeople.id==e.userId})},(0,a.zw)(e.fullName),3)):(0,l.kq)("v-if",!0)]})),_:2},1032,["onClick"])})),128))])):(0,l.kq)("v-if",!0)])):(0,l.kq)("v-if",!0),(0,l._)("div",x,[1==t.currentPeople.label?((0,l.wg)(),(0,l.j4)(S,{key:0,round:"",class:"plain",style:{width:"134px","line-height":"13px",height:"48px"},onClick:t.hidePopup},{default:(0,l.w5)((function(){return[k]})),_:1},8,["onClick"])):(0,l.kq)("v-if",!0),1==t.currentPeople.label?((0,l.wg)(),(0,l.j4)(S,{key:1,loading:t.buttonLoading,round:"",class:"color",style:{width:"134px","margin-left":"15px","line-height":"13px",height:"48px"},onClick:n[4]||(n[4]=function(e){return t.updateRole()})},{default:(0,l.w5)((function(){return[b]})),_:1},8,["loading"])):(0,l.kq)("v-if",!0),2==t.currentPeople.label?((0,l.wg)(),(0,l.j4)(S,{key:2,loading:t.buttonLoading,round:"",class:"color",style:{width:"160px","line-height":"13px",height:"48px"},onClick:n[5]||(n[5]=function(e){return t.updateRole()})},{default:(0,l.w5)((function(){return[y]})),_:1},8,["loading"])):(0,l.kq)("v-if",!0)])])]})),_:1},8,["show"])])}],["__scopeId","data-v-a4b47086"]])},7872:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAcCAYAAAB/E6/TAAAAAXNSR0IArs4c6QAAAuRJREFUSEudllFIU2EUx//n7iZOFBb5YDAoyMCYlxIyeijYQLDdeigKXOidPhT5EFRQT/lgFPTSg9BDCULhBhkGFcGd9eIehB4ypt5FPhj5ICS0KMi2GfOe+GaW1u7dt92njf3P+X3n7Hz/ewhlnuBkUPXv8HYBOAPgIBH5GbxCwAwpdGc0YD4vl0P8Tm6iXiu8Zw30hIADzjqeYtDiag7Xxg+Zy046R1D3bNivKPQGQJPMicFIe75k2x+GkvlSekeQYYUfARSRgvwWMTAY18wb0qCz08FGT433ExGpFYIyS5nszmQoWfg3rmRFUSvcxaCxSiCbtO0xzZyWAhlz+k0QBqoBsYL+eMAclgOl9Qdg9FUFcvifSrbOsPQXAE5UCYrHNdOQq8jS3wNoqQYEcDKmJUKyoHsA+qsBMTAS18zzUqCet53NqFFSBKqvBLZuTRSSnjqRPJo+fpeZL1YCAvFQrDVxRfrCCmEkdWy3qpIlW5WoZjVHe538ztVURQupxiMm0HUwGJgpFOxTY20TixWb6kZA92z4sKLQa9cW2gUttv9V2k3jWtFGC7epyke3JJ5M1uvk2htxZUFRS7/EwJD7aTkyqiUeV1XRyVTQV696r4NxubyLs3gHDeSV3PB4ILlSdup633UG1mxPB4E7GAiWnjieWk9ER/5PyHlmSgp3gGJPxFtfzm5pXU9aP02MWxLT9cfHDDnjnSfwoGgrRef0C0y4L3kxl78XsvuEtkGtswD45eLoHPVYesp9+diaigt2CB7yEdFTOQgg7hkZlv4VgE8mSNz+pUxuu8+H+ga1TsRJPUUPNCydpdRFEU/FtMRR8cmwdNG6VtlYMtL6ZzAaZQIY+DsMFW1JvCBAt5lxlYCyGw8zF6BQBDbXEmEEoFqJAxYnr+gMfZPB2p++uhZSuFlRsIuAJhvURGA/xDuJ0AiGSLppmeQ8iNY3U+ZFgFYYEN+XGPYH2LTww87NP2tLfhOSXzl4FVtMDRN6AAAAAElFTkSuQmCC"},3476:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAcCAYAAAB/E6/TAAAAAXNSR0IArs4c6QAAAm1JREFUSEudljFoU1EUhr/TxhChYIQWKhQUrKCo4GDBQcFCRxdRsIvgoFjyKjWgkw4RBZdCS82zBgoughYEERfHDAUHBSMtmKGig2AgQh0ySElz5N6kavTlvfveXTLkP/fLuTnnP0eIOFogxRAXgPMoxxFGgAZQQZmVaV5G3WG+lzCRlthPk+fAsRDdCvAFuCketV66niBdYIR+3gLDLr8YWKPOmBT4GaTvDXrIU5RJR8i2rCAed5xBOssgGb4hpGKCvlNnjxRo/hsXmJH69s9/FhPSlrcYk2u8cwMVuYtwOxEIpsSj5AbyeQxcSggK/J+Cn67IK4QzCUFPxOOiW0ZFPiIcTAQSypJj3A3kswhMJQQtSY4rrqBR4D0wEBPWoMW4c9WZy9XnATAdCyTMS468c8Na0Bz7SLMaIytjtAd6+V24qfqMorYCowqjwiZnJW/NNfCEgmxmC5ygnzehT9jkqMywFqaJBrWf8HMoqM7OXq69HRcN8pkB5iOKYlI8lhNlpHNkSXML5bqDi5sZZLyxJJ6dvv+droy0yGGECZQJhNM9Ks5MVHNOBtxngGWUMileyxQfup5OFznHFvccquu3j6mL8SpVBGOyy6I+V4FHjo1ZY5NDVruD1c6i4hJ62YCM1YQtH90XtaxhZunjhQuho6mIFtlAyDoGNaizm10MkGbDMcbIGiYjjRGwIh6nbCP71p6OuMYaUB0YdAz4UwzxtqR1A7qPcsOhV0Bp2hWsjwywBPYz6lSBgu0jLZBhyBqnmUN7O0vjsK0qtTPJZGwu/XuZND3T3kzFmqmZRTWEr7T4hLLOFlXJ88NIfgFamLPr2z6seQAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=191.73ad13a6fb6df00ccfeb.js.map